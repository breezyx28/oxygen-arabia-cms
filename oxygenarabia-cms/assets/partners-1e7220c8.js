var re=Object.defineProperty;var se=(t,n,o)=>n in t?re(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;var A=(t,n,o)=>(se(t,typeof n!="symbol"?n+"":n,o),o);import{j as e,U as ie,b as R,V as a,r as l,a5 as q,a6 as ae,a7 as le,I as F,Y as U,S as E,B as P,s as B,a8 as V,a9 as ce,a2 as de,a3 as N,J as ue,aa as pe,a4 as ge,W as he}from"./index-203bd9a2.js";import{T as z,a as O,b as me,c as xe,d as fe,e as je,f as be,g as Se}from"./TableSortLabel-4b7151f4.js";import"./label-ddacf375.js";import{Y as ye,c as Pe,b as Ce,I as $}from"./index.esm-db640a3f.js";import{F as H}from"./FileUploadInput-2322a252.js";import{a as Y,b as Q,c as G,D as J,I as we}from"./IframeModal-6d30ce25.js";import{C as ve}from"./Container-46542334.js";import{C as ke}from"./Card-6365d421.js";import"./Select-6ba60d6f.js";import"./TextField-64355d14.js";import"./isMuiElement-68bba295.js";import"./Popper-557a1982.js";function K({query:t}){return e.jsx(z,{children:e.jsx(O,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ie,{sx:{textAlign:"center"},children:[e.jsx(R,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(R,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}K.propTypes={query:a.string};class X extends ye{constructor(){super();A(this,"supportedFormats",["image/png","image/svg+xml","image/jpeg"]);A(this,"form",{logo:null});A(this,"schema",Pe().shape({logo:Ce().required("Logo is required").test("fileFormat","Unsupported file format",o=>o?this.supportedFormats.includes(o.type):!0).test("fileSize","File size must not exceed 1 MB",o=>o?o.size<=1048576:!0)}))}}const Ie=B(J)(({theme:t})=>({"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}));function Te({id:t}){console.log("id: ",t);const[n,o]=l.useState(!1),{refetch:s}=q(),[i,{data:c,isLoading:p,isSuccess:d,error:r,isError:g}]=ae(),{data:u,isLoading:b}=le({id:t}),{controller:C,displayError:x}=new X,{register:M,handleSubmit:w,reset:v,setValue:S,formState:{errors:y}}=C();l.useEffect(()=>{r&&(console.log("error: ",r),x(r))},[r]);const k=async T=>{let D=V(T);i({id:t,body:D})},L=()=>{o(!0)},I=()=>{o(!1)};return l.useEffect(()=>{d&&(console.log("data"),s(),I())},[c]),l.useEffect(()=>{u&&(console.log("partners: ",u),v(u),S("logo",""))},[u]),e.jsxs(l.Fragment,{children:[e.jsxs("span",{style:{width:"100%"},onClick:L,children:[e.jsx(F,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(Ie,{onClose:I,"aria-labelledby":"customized-dialog-title",open:n,fullWidth:!0,children:[e.jsx(Y,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Update Partner Section"}),e.jsx(U,{"aria-label":"close",onClick:I,sx:{position:"absolute",right:8,top:8,color:T=>T.palette.grey[500]},children:e.jsx(Fe,{})}),e.jsx(Q,{dividers:!0,children:e.jsxs("form",{method:"POST",onSubmit:w(k),children:[e.jsx(E,{spacing:3,children:(u==null?void 0:u.logo)&&e.jsx(H,{label:"Update Partner Image",name:"logo",title:"Partner Image",setValue:S,showUrl:u==null?void 0:u.logo,error:{...$({inputName:"logo",yupError:y})}})}),e.jsx(P,{type:"submit",id:"partner-form",style:{display:"none"},autoFocus:!0,children:"Submit"})]})}),e.jsx(G,{children:e.jsx(P,{isLoading:p,autoFocus:!0,onClick:()=>{document.getElementById("partner-form").click()},children:"Save changes"})})]})]})}const Fe=()=>e.jsx("svg",{width:24,height:24,fill:"none",stroke:"#697686",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"m5 5 14 14M5 19 19 5"})});function Z({selected:t,id:n,logo:o,handleClick:s}){const[i,{data:c,isLoading:p,isFetching:d}]=ce(),[r,g]=l.useState(null),u=x=>{g(x.currentTarget)},b=()=>{g(null)},C=()=>{i({id:n}),g(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(z,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,children:[e.jsx(O,{component:"th",scope:"row",padding:"none",children:e.jsx(E,{direction:"row",alignItems:"center",spacing:2,children:e.jsx("img",{src:o,alt:"partner",style:{width:"auto",height:100,objectFit:"cover"}})})}),e.jsx(O,{align:"right",children:e.jsx(U,{onClick:u,children:e.jsx(F,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(de,{open:!!r,anchorEl:r,onClose:b,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsx(N,{children:e.jsx(Te,{id:n})}),e.jsxs(N,{onClick:C,sx:{color:"error.main"},children:[e.jsx(F,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]})]})}Z.propTypes={id:a.any,logo:a.any,handleClick:a.func,selected:a.any};const Ee={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Oe(t,n,o){return t?Math.max(0,(1+t)*n-o):0}function W(t,n,o){return t[o]===null?1:n[o]===null||n[o]<t[o]?-1:n[o]>t[o]?1:0}function Me(t,n){return t==="desc"?(o,s)=>W(o,s,n):(o,s)=>-W(o,s,n)}function Le({inputData:t,comparator:n,filterName:o}){const s=t.map((i,c)=>[i,c]);return s.sort((i,c)=>{const p=n(i[0],c[0]);return p!==0?p:i[1]-c[1]}),t=s.map(i=>i[0]),o&&(t=t.filter(i=>i.name.toLowerCase().indexOf(o.toLowerCase())!==-1)),t}function _({order:t,orderBy:n,rowCount:o,headLabel:s,numSelected:i,onRequestSort:c,onSelectAllClick:p}){const d=r=>g=>{c(g,r)};return e.jsx(me,{children:e.jsx(z,{children:s.map(r=>e.jsx(O,{align:r.align||"left",sortDirection:n===r.id?t:!1,sx:{width:r.width,minWidth:r.minWidth},children:e.jsxs(xe,{hideSortIcon:!0,active:n===r.id,direction:n===r.id?t:"asc",onClick:d(r.id),children:[r.label,n===r.id?e.jsx(ue,{sx:{...Ee},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},r.id))})})}_.propTypes={order:a.oneOf(["asc","desc"]),orderBy:a.string,rowCount:a.number,headLabel:a.array,numSelected:a.number,onRequestSort:a.func,onSelectAllClick:a.func};function ee({emptyRows:t,height:n}){return t?e.jsx(z,{sx:{...n&&{height:n*t}},children:e.jsx(O,{colSpan:9})}):null}ee.propTypes={emptyRows:a.number,height:a.number};a.number,a.string,a.func;const De=B(J)(({theme:t})=>({"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}));function Ae(){const[t,n]=l.useState(!1),[o,{data:s,isLoading:i,isSuccess:c,error:p,isError:d}]=pe(),{controller:r,displayError:g}=new X,{register:u,handleSubmit:b,reset:C,setValue:x,formState:{errors:M}}=r();l.useEffect(()=>{p&&(console.log("error: ",p),g(p))},[p]);const w=async y=>{let k=V(y);o(k)},v=()=>{n(!0)},S=()=>{n(!1)};return l.useEffect(()=>{c&&(console.log("data"),S())},[s]),e.jsxs(l.Fragment,{children:[e.jsx(P,{variant:"contained",color:"inherit",startIcon:e.jsx(F,{icon:"eva:plus-fill"}),onClick:v,children:"Create Partner"}),e.jsxs(De,{onClose:S,"aria-labelledby":"customized-dialog-title",open:t,fullWidth:!0,children:[e.jsx(Y,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Create Partner Section"}),e.jsx(U,{"aria-label":"close",onClick:S,sx:{position:"absolute",right:8,top:8,color:y=>y.palette.grey[500]},children:e.jsx(Re,{})}),e.jsx(Q,{dividers:!0,children:e.jsxs("form",{method:"POST",onSubmit:b(w),children:[e.jsx(E,{spacing:3,children:e.jsx(H,{label:"Upload Partner Image",name:"logo",title:"Partner Image",setValue:x,error:{...$({inputName:"logo",yupError:M})}})}),e.jsx(P,{type:"submit",id:"partner-form",style:{display:"none"},autoFocus:!0,children:"Submit"})]})}),e.jsx(G,{children:e.jsx(P,{isLoading:i,autoFocus:!0,onClick:()=>{document.getElementById("partner-form").click()},children:"Save changes"})})]})]})}const Re=()=>e.jsx("svg",{width:24,height:24,fill:"none",stroke:"#697686",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"m5 5 14 14M5 19 19 5"})});function ze(){const{data:t,isLoading:n,isFetching:o}=q(),[s,i]=l.useState(0),[c,p]=l.useState("asc"),[d,r]=l.useState([]),[g,u]=l.useState("id"),[b,C]=l.useState(""),[x,M]=l.useState(5),w=(h,m)=>{m!==""&&(p(g===m&&c==="asc"?"desc":"asc"),u(m))},v=h=>{if(h.target.checked){const m=t==null?void 0:t.map(f=>f.id);r(m);return}r([])},S=(h,m)=>{const f=d.indexOf(m);let j=[];f===-1?j=j.concat(d,m):f===0?j=j.concat(d.slice(1)):f===d.length-1?j=j.concat(d.slice(0,-1)):f>0&&(j=j.concat(d.slice(0,f),d.slice(f+1))),r(j)},y=(h,m)=>{i(m)},k=h=>{i(0),M(parseInt(h.target.value,10))},L=Le({inputData:t??[],comparator:Me(c,g),filterName:b}),I=!L.length&&!!b,[T,D]=l.useState(!1),te="https://oxygenarabia.com/#partners",ne=()=>{D(!0)},oe=()=>{D(!1)};return e.jsxs(ve,{children:[e.jsxs(E,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsxs(E,{direction:"column",alignItems:"start",justifyContent:"space-between",children:[e.jsx(R,{variant:"h4",children:"Partners"}),e.jsx(R,{variant:"caption",color:"textSecondary",mt:2,children:"Partners page were you can add, delete and update existed partner logo."})]}),e.jsx(P,{variant:"contained",onClick:ne,color:"error",startIcon:e.jsx(F,{icon:"fluent:live-24-filled"}),children:"Live"}),e.jsx(we,{open:T,onClose:oe,src:te,title:"Projects Iframe"}),e.jsx(Ae,{})]}),e.jsxs(ke,{children:[e.jsx(ge,{children:e.jsx(fe,{sx:{overflow:"unset"},children:e.jsxs(je,{sx:{minWidth:800},children:[e.jsx(_,{order:c,orderBy:g,rowCount:t==null?void 0:t.length,numSelected:d.length,onRequestSort:w,onSelectAllClick:v,headLabel:[{id:"logo",label:"Logo"},{id:""}]}),e.jsxs(be,{children:[L.slice(s*x,s*x+x).map(h=>e.jsx(Z,{id:h.id,logo:h.logo,selected:d.indexOf(h.id)!==-1,handleClick:m=>S(m,h.id)},h.id)),e.jsx(ee,{height:77,emptyRows:Oe(s,x,(t==null?void 0:t.length)??[])}),I&&e.jsx(K,{query:b})]})]})})}),e.jsx(Se,{page:s,component:"div",count:(t==null?void 0:t.length)??[],rowsPerPage:x,onPageChange:y,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:k})]})]})}function Xe(){return e.jsxs(e.Fragment,{children:[e.jsx(he,{children:e.jsx("title",{children:" Partners | Oxygen Arabia "})}),e.jsx(ze,{})]})}export{Xe as default};
