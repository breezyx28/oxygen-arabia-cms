var N=Object.defineProperty;var _=(r,s,a)=>s in r?N(r,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[s]=a;var p=(r,s,a)=>(_(r,typeof s!="symbol"?s+"":s,a),a);import{r as m,T as U,bd as $,be as B,R as f,j as e,S as h,b as O,aT as w,Y as j,I as y,B as R,W as V}from"./index-203bd9a2.js";import{Y as W,c as Y,a as i,g as F,I as l}from"./index.esm-db640a3f.js";import{C as G}from"./Container-46542334.js";import{C as M}from"./Card-6365d421.js";import{T as d}from"./TextField-64355d14.js";import"./isMuiElement-68bba295.js";import"./Select-6ba60d6f.js";class Q extends W{constructor(){super();p(this,"form",{name:null,email:null,password:null,password_confirmation:null});p(this,"schema",Y().shape({name:i().nullable(),email:i().email().nullable(),password:i().nullable(),password_confirmation:i().nullable().oneOf([F("password"),null],"Passwords must match")}))}}function q(){const{showToast:r}=m.useContext(U),[s,a]=m.useState(!1),[c,b]=m.useState(!1),{data:u,isLoading:P,refetch:g}=$(),[E,{data:x,isLoading:C,isSuccess:z,error:o,isError:D}]=B(),{controller:S,displayError:I}=new Q,{register:t,handleSubmit:T,reset:v,setValue:H,formState:{errors:n}}=S();f.useEffect(()=>{o&&(console.log("error: ",o),I(o))},[o]);const k=async A=>{const{confirmPassword:J,...L}=A;E(L)};return f.useEffect(()=>{u&&v(u)},[u]),f.useEffect(()=>{x&&(r("Successfully updated","success"),g())},[x]),e.jsxs(G,{children:[e.jsx(h,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(O,{variant:"h4",children:"Profile"})}),e.jsx(M,{sx:{p:3},children:e.jsx("form",{method:"POST",onSubmit:T(k),style:{width:"100%"},children:e.jsxs(h,{spacing:3,children:[e.jsx(d,{fullWidth:!0,InputLabelProps:{shrink:!0},...t("name"),label:"Name",...l({inputName:"name",yupError:n})}),e.jsx(d,{fullWidth:!0,InputLabelProps:{shrink:!0},type:"email",...t("email"),label:"Email",...l({inputName:"email",yupError:n})}),e.jsx(d,{name:"password",...t("password"),...l({inputName:"password",yupError:n}),label:"Password",type:s?"text":"password",InputProps:{endAdornment:e.jsx(w,{position:"end",children:e.jsx(j,{onClick:()=>a(!s),edge:"end",children:e.jsx(y,{icon:s?"eva:eye-fill":"eva:eye-off-fill"})})})}}),e.jsx(d,{name:"password_confirmation",...t("password_confirmation"),...l({inputName:"password_confirmation",yupError:n}),label:"Confirm Password",type:c?"text":"password",InputProps:{endAdornment:e.jsx(w,{position:"end",children:e.jsx(j,{onClick:()=>b(!c),edge:"end",children:e.jsx(y,{icon:c?"eva:eye-fill":"eva:eye-off-fill"})})})}}),e.jsx(R,{disabled:C||P,variant:"contained",type:"submit",children:"Update"})]})})})]})}function te(){return e.jsxs(e.Fragment,{children:[e.jsx(V,{children:e.jsx("title",{children:" Profile | Oxygen Arabia "})}),e.jsx(q,{})]})}export{te as default};
