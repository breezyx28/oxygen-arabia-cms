var le=Object.defineProperty;var ce=(t,n,r)=>n in t?le(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;var U=(t,n,r)=>(ce(t,typeof n!="symbol"?n+"":n,r),r);import{j as e,U as de,b as S,V as s,r as c,ab as $,ac as ue,ad as pe,I as R,Y as B,S as A,J as N,B as L,s as H,a8 as Y,ae as me,a2 as he,a3 as G,af as xe,ag as ge,a4 as je,W as fe}from"./index-203bd9a2.js";import"./user-eb66773a.js";import{T as z,a as I,b as be,c as ye,d as Ce,e as Se,f as Pe,g as we}from"./TableSortLabel-4b7151f4.js";import"./label-ddacf375.js";import{F as Q}from"./FileUploadInput-2322a252.js";import{Y as ve,c as ke,a as _,b as Ie,I as j}from"./index.esm-db640a3f.js";import{a as J,b as K,c as X,D as Z,I as Te}from"./IframeModal-6d30ce25.js";import{G as T}from"./Grid-32ebb4ff.js";import{T as M}from"./TextField-64355d14.js";import{C as Me}from"./Container-46542334.js";import{C as Ee}from"./Card-6365d421.js";import"./Select-6ba60d6f.js";import"./Popper-557a1982.js";import"./isMuiElement-68bba295.js";class ee extends ve{constructor(){super();U(this,"supportedFormats",["image/png","image/svg+xml","image/jpeg"]);U(this,"form",{image:null,title:null,subtitle:null,page_title:null,page_subtitle:null,description:null,card_description:null});U(this,"schema",ke().shape({title:_().required("Title is required"),subtitle:_().required("Subtitle is required"),page_title:_().required("Page Title is required"),page_subtitle:_().required("Page Subtitle is required"),description:_().required("Description is required"),card_description:_().required("Card Description is required"),image:Ie().required("Image is required").test("fileFormat","Unsupported file format",r=>r?this.supportedFormats.includes(r.type):!0).test("fileSize","File size must not exceed 1 MB",r=>r?r.size<=1048576:!0)}))}}function te({query:t}){return e.jsx(z,{children:e.jsx(I,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(de,{sx:{textAlign:"center"},children:[e.jsx(S,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(S,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}te.propTypes={query:s.string};const De=H(Z)(({theme:t})=>({"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}));function Oe({id:t}){const[n,r]=c.useState(!1),{refetch:a}=$(),{data:i,isLoading:u}=ue({id:t}),[g,{data:d,isLoading:o,isSuccess:f,error:P,isError:E}]=pe(),{controller:W,displayError:x}=new ee,{register:p,handleSubmit:w,reset:D,setValue:b,formState:{errors:m}}=W(),O=async F=>{let k=Y(F);g({id:t,body:k})},q=()=>{r(!0)},v=()=>{r(!1)};return c.useEffect(()=>{f&&(console.log("data"),a(),v())},[d]),c.useEffect(()=>{i&&(console.log("services: ",i),D(i),b("image",""))},[i]),e.jsxs(c.Fragment,{children:[e.jsxs("span",{style:{width:"100%"},onClick:q,children:[e.jsx(R,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(De,{onClose:v,"aria-labelledby":"customized-dialog-title",open:n,fullWidth:!0,children:[e.jsx(J,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Update Project Section"}),e.jsx(B,{"aria-label":"close",onClick:v,sx:{position:"absolute",right:8,top:8,color:F=>F.palette.grey[500]},children:e.jsx(Fe,{})}),e.jsx(K,{dividers:!0,children:e.jsxs("form",{method:"POST",onSubmit:w(O),children:[e.jsxs(A,{spacing:3,children:[e.jsx(N,{sx:{flexGrow:1},children:e.jsx(T,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:(i==null?void 0:i.image)&&e.jsx(Q,{label:"Upload Project Image",name:"image",title:"Project Image",setValue:b,error:{...j({inputName:"image",yupError:m})},showUrl:i==null?void 0:i.image})})}),e.jsx(N,{sx:{flexGrow:1},children:e.jsxs(T,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(T,{item:!0,xs:6,md:6,children:e.jsx(M,{fullWidth:!0,...p("title"),name:"title",label:"Project title",...j({inputName:"title",yupError:m})})}),e.jsx(T,{item:!0,xs:6,md:6,children:e.jsx(M,{fullWidth:!0,...p("subtitle"),name:"subtitle",label:"Project subtitle",...j({inputName:"subtitle",yupError:m})})})]})}),e.jsx(M,{...p("description"),fullWidth:!0,multiline:!0,maxRows:4,name:"description",label:"Description",...j({inputName:"description",yupError:m})}),e.jsx(M,{...p("card_description"),fullWidth:!0,multiline:!0,maxRows:4,name:"card_description",label:"Card Description",...j({inputName:"card_description",yupError:m})})]}),e.jsx(L,{type:"submit",id:"project-form",style:{display:"none"},autoFocus:!0,children:"Submit"})]})}),e.jsx(X,{children:e.jsx(L,{autoFocus:!0,onClick:()=>{document.getElementById("project-form").click()},children:"Update changes"})})]})]})}const Fe=()=>e.jsx("svg",{width:24,height:24,fill:"none",stroke:"#697686",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"m5 5 14 14M5 19 19 5"})}),We={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2};function re({selected:t,id:n,title:r,subtitle:a,image:i,description:u,card_description:g,handleClick:d}){const[o,{data:f,isLoading:P,isError:E}]=me(),[W,x]=c.useState(null),[p,w]=c.useState(!1),[D,b]=c.useState(""),m=k=>{x(k.currentTarget)},O=()=>{x(null)},q=()=>{o({id:n}),setOpen(null)},v=k=>{b(k),w(!0)},F=()=>{w(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(z,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,children:[e.jsx(I,{component:"th",scope:"row",padding:"normal",children:e.jsxs(A,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx("img",{src:i,alt:r,style:{width:100,height:100,objectFit:"cover"}}),e.jsx(S,{variant:"subtitle2",noWrap:!0,children:r})]})}),e.jsx(I,{children:a}),e.jsx(I,{onClick:()=>v(u),style:{cursor:"pointer"},children:e.jsx(S,{noWrap:!0,sx:{textDecoration:"underline",color:"primary.main"},children:"View Description"})}),e.jsx(I,{onClick:()=>v(g),style:{cursor:"pointer"},children:e.jsx(S,{noWrap:!0,sx:{textDecoration:"underline",color:"primary.main"},children:"View Card Description"})}),e.jsx(I,{align:"right",children:e.jsx(B,{onClick:m,children:e.jsx(R,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(he,{open:!!W,anchorEl:W,onClose:O,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsx(G,{children:e.jsx(Oe,{id:n})}),e.jsxs(G,{onClick:q,sx:{color:"error.main"},children:[e.jsx(R,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]}),e.jsx(xe,{open:p,onClose:F,children:e.jsxs(N,{sx:We,children:[e.jsx(S,{variant:"h6",component:"h2",gutterBottom:!0,children:"Content"}),e.jsx(S,{children:D})]})})]})}re.propTypes={image:s.any,description:s.any,handleClick:s.func,service:s.any,title:s.any,subtitle:s.any,page_title:s.any,page_subtitle:s.any,selected:s.any,card_description:s.any};const qe={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function _e(t,n,r){return t?Math.max(0,(1+t)*n-r):0}function V(t,n,r){return t[r]===null?1:n[r]===null||n[r]<t[r]?-1:n[r]>t[r]?1:0}function Le(t,n){return t==="desc"?(r,a)=>V(r,a,n):(r,a)=>-V(r,a,n)}function Ne({inputData:t,comparator:n,filterName:r}){const a=t.map((i,u)=>[i,u]);return a.sort((i,u)=>{const g=n(i[0],u[0]);return g!==0?g:i[1]-u[1]}),t=a.map(i=>i[0]),r&&(t=t.filter(i=>i.name.toLowerCase().indexOf(r.toLowerCase())!==-1)),t}function ne({order:t,orderBy:n,rowCount:r,headLabel:a,numSelected:i,onRequestSort:u,onSelectAllClick:g}){const d=o=>f=>{u(f,o)};return e.jsx(be,{children:e.jsx(z,{children:a.map(o=>e.jsx(I,{align:o.align||"left",sortDirection:n===o.id?t:!1,sx:{width:o.width,minWidth:o.minWidth},children:e.jsxs(ye,{hideSortIcon:!0,active:n===o.id,direction:n===o.id?t:"asc",onClick:d(o.id),children:[o.label,n===o.id?e.jsx(N,{sx:{...qe},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},o.id))})})}ne.propTypes={order:s.oneOf(["asc","desc"]),orderBy:s.string,rowCount:s.number,headLabel:s.array,numSelected:s.number,onRequestSort:s.func,onSelectAllClick:s.func};function ie({emptyRows:t,height:n}){return t?e.jsx(z,{sx:{...n&&{height:n*t}},children:e.jsx(I,{colSpan:9})}):null}ie.propTypes={emptyRows:s.number,height:s.number};s.number,s.string,s.func;const Re=H(Z)(({theme:t})=>({"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}));function Ae(){const[t,n]=c.useState(!1),[r,{data:a,isLoading:i,isSuccess:u,error:g,isError:d}]=ge(),{controller:o,displayError:f}=new ee,{register:P,handleSubmit:E,reset:W,setValue:x,formState:{errors:p}}=o(),w=async m=>{let O=Y(m);r(O)},D=()=>{n(!0)},b=()=>{n(!1)};return e.jsxs(c.Fragment,{children:[e.jsx(L,{variant:"contained",color:"inherit",startIcon:e.jsx(R,{icon:"eva:plus-fill"}),onClick:D,children:"Create Project"}),e.jsxs(Re,{onClose:b,"aria-labelledby":"customized-dialog-title",open:t,fullWidth:!0,children:[e.jsx(J,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Create Project Section"}),e.jsx(B,{"aria-label":"close",onClick:b,sx:{position:"absolute",right:8,top:8,color:m=>m.palette.grey[500]},children:e.jsx(Ue,{})}),e.jsx(K,{dividers:!0,children:e.jsxs("form",{method:"POST",onSubmit:E(w),children:[e.jsxs(A,{spacing:3,children:[e.jsx(N,{sx:{flexGrow:1},children:e.jsx(T,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:e.jsx(Q,{label:"Upload Project Image",name:"image",title:"Project Image",setValue:x,error:{...j({inputName:"image",yupError:p})}})})}),e.jsx(N,{sx:{flexGrow:1},children:e.jsxs(T,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(T,{item:!0,xs:6,md:6,children:e.jsx(M,{fullWidth:!0,...P("title"),name:"title",label:"Project title",...j({inputName:"title",yupError:p})})}),e.jsx(T,{item:!0,xs:6,md:6,children:e.jsx(M,{fullWidth:!0,...P("subtitle"),name:"subtitle",label:"Project subtitle",...j({inputName:"subtitle",yupError:p})})})]})}),e.jsx(M,{...P("description"),fullWidth:!0,multiline:!0,maxRows:4,name:"description",label:"Description",...j({inputName:"description",yupError:p})}),e.jsx(M,{...P("card_description"),fullWidth:!0,multiline:!0,maxRows:4,name:"card_description",label:"Card Description",...j({inputName:"card_description",yupError:p})})]}),e.jsx(L,{type:"submit",id:"project-form",style:{display:"none"},autoFocus:!0,children:"Submit"})]})}),e.jsx(X,{children:e.jsx(L,{autoFocus:!0,onClick:()=>{document.getElementById("project-form").click()},children:"Save changes"})})]})]})}const Ue=()=>e.jsx("svg",{width:24,height:24,fill:"none",stroke:"#697686",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"m5 5 14 14M5 19 19 5"})});function ze(){const{data:t,isLoading:n,error:r}=$(),[a,i]=c.useState(0),[u,g]=c.useState("asc"),[d,o]=c.useState([]),[f,P]=c.useState("name"),[E,W]=c.useState(""),[x,p]=c.useState(5),w=(l,h)=>{h!==""&&(g(f===h&&u==="asc"?"desc":"asc"),P(h))},D=l=>{if(l.target.checked){const h=t==null?void 0:t.map(y=>y.name);o(h);return}o([])},b=(l,h)=>{const y=d.indexOf(h);let C=[];y===-1?C=C.concat(d,h):y===0?C=C.concat(d.slice(1)):y===d.length-1?C=C.concat(d.slice(0,-1)):y>0&&(C=C.concat(d.slice(0,y),d.slice(y+1))),o(C)},m=(l,h)=>{i(h)},O=l=>{i(0),p(parseInt(l.target.value,10))},q=Ne({inputData:t??[],comparator:Le(u,f),filterName:E}),v=!q.length&&!!E,[F,k]=c.useState(!1),se="https://oxygenarabia.com/#our-projects",oe=()=>{k(!0)},ae=()=>{k(!1)};return e.jsxs(Me,{children:[e.jsxs(A,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsxs(A,{direction:"column",alignItems:"start",justifyContent:"space-between",children:[e.jsx(S,{variant:"h4",children:"Projects"}),e.jsx(S,{variant:"caption",color:"textSecondary",mt:2,children:"Projects section, control your existed projects and add more."})]}),e.jsx(L,{variant:"contained",onClick:oe,color:"error",startIcon:e.jsx(R,{icon:"fluent:live-24-filled"}),children:"Live"}),e.jsx(Te,{open:F,onClose:ae,src:se,title:"Projects Iframe"}),e.jsx(Ae,{})]}),e.jsxs(Ee,{children:[e.jsx(je,{children:e.jsx(Ce,{sx:{overflow:"unset"},children:e.jsxs(Se,{sx:{minWidth:800},children:[e.jsx(ne,{order:u,orderBy:f,rowCount:(t==null?void 0:t.length)??[],numSelected:d.length,onRequestSort:w,onSelectAllClick:D,headLabel:[{id:"title",label:"Title"},{id:"subtitle",label:"Subtitle"},{id:"description",label:"Description"},{id:"card_description",label:"Card Description"},{id:""}]}),e.jsxs(Pe,{children:[q.slice(a*x,a*x+x).map(l=>e.jsx(re,{id:l.id,title:l.title,subtitle:l.subtitle,image:l.image,description:l.description,card_description:l.card_description,selected:d.indexOf(l.name)!==-1,handleClick:h=>b(h,l.name)},l.id)),e.jsx(ie,{height:77,emptyRows:_e(a,x,(t==null?void 0:t.length)??[])}),v&&e.jsx(te,{query:E})]})]})})}),e.jsx(we,{page:a,component:"div",count:(t==null?void 0:t.length)??[],rowsPerPage:x,onPageChange:m,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:O})]})]})}function it(){return e.jsxs(e.Fragment,{children:[e.jsx(fe,{children:e.jsx("title",{children:" Projects | Oxygen Arabia "})}),e.jsx(ze,{})]})}export{it as default};
