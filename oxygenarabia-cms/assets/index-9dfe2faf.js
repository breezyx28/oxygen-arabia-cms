var H=Object.defineProperty;var G=(l,s,t)=>s in l?H(l,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[s]=t;var v=(l,s,t)=>(G(l,typeof s!="symbol"?s+"":s,t),t);import{j as e,b as f,r as S,J as b,B as q,s as O,R as I,T as Q,bx as Y,by as J,bz as K,S as T}from"./index-203bd9a2.js";import"./IframeModal-6d30ce25.js";import{I as m,Y as V,c as X,a as n,b as Z,e as ee,C as te}from"./index.esm-db640a3f.js";import{E as re,F as ie,S as ne,r as le,o as M}from"./main-screen-61f0eccc.js";import{G as u}from"./Grid-32ebb4ff.js";import{T as d,F as se,a as ae}from"./TextField-64355d14.js";import{C as oe}from"./Container-46542334.js";import{C as y}from"./Card-6365d421.js";import"./Popper-557a1982.js";import"./Select-6ba60d6f.js";import"./FileUploadInput-2322a252.js";import"./isMuiElement-68bba295.js";const ue=({title:l,subtitle:s,register:t,yupErrors:_,titleLabel:g="Title",subtitleLabel:p="Subtitle",titleField:h="title",subtitleField:c="subtitle"})=>e.jsxs(e.Fragment,{children:[e.jsx(f,{variant:"h6",children:l}),e.jsxs(u,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,InputLabelProps:{shrink:!0},...t(h),label:g,...m({inputName:h,yupError:_})})}),e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,InputLabelProps:{shrink:!0},...t(c),label:p,...m({inputName:c,yupError:_})})})]})]}),L=ue,me=O("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});function pe({label:l,name:s,error:t,showUrl:_,setValue:g=()=>null,...p}){const[h,c]=S.useState(null),w=E=>{var a;const x=(a=E.currentTarget)==null?void 0:a.files[0];if(x){const j=URL.createObjectURL(x);c(j),g(s,x)}};return S.useMemo(()=>{_&&c(_)},[_]),e.jsx(b,{children:e.jsxs(se,{error:t==null?void 0:t.error,children:[h&&e.jsx(b,{sx:{display:"flex",justifyContent:"center"},children:e.jsx("img",{src:h,alt:"Uploaded Image",style:{width:"auto",height:150,objectFit:"cover"}})}),e.jsxs(q,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:e.jsx(ce,{}),children:[l??"Upload file",e.jsx(me,{type:"file",name:s,onChange:w,...p})]}),t!=null&&t.error?e.jsx(ae,{children:t==null?void 0:t.helperText}):""]})})}const ce=()=>e.jsxs("svg",{width:24,height:24,fill:"none",stroke:"#ffffff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M6.341 6.159C7.165 3.736 9.388 2 12 2c3.314 0 6 2.793 6 6.238 2.21 0 4 1.863 4 4.16 0 1.539-.804 2.883-2 3.602M6.32 6.206C3.88 6.551 2 8.726 2 11.358c0 1.7.785 3.21 2 4.159"}),e.jsx("path",{d:"M12 12v10"}),e.jsx("path",{d:"m8 16 2-2 2-2 4 4"})]}),de=({defaultValue:l=null,inputName:s,setValue:t,yupErrors:_,addButtonText:g="Add Input",inputLabel:p="Input"})=>{const[h,c]=S.useState(l??[]);I.useMemo(()=>{l&&c(l)},[l]);const w=(x,a,j="")=>{a([...x,j]),t(s,[...x,j])},E=(x,a,j)=>{const r=[...x];r.splice(j,1),a(r),t(s,r)};return e.jsxs(e.Fragment,{children:[h.map((x,a)=>e.jsxs(u,{container:!0,spacing:2,sx:{mb:2,p:2,border:"1px solid #eee",borderRadius:1},children:[e.jsx(u,{item:!0,xs:10,children:e.jsx(d,{fullWidth:!0,label:p,value:x||"",onChange:j=>{const r=[...h];r[a]=j.target.value,c(r),t(s,r)},...m({inputName:`${s}[${a}]`,yupError:_})})}),e.jsx(u,{item:!0,xs:2,display:"flex",alignItems:"center",children:e.jsx(q,{variant:"outlined",color:"error",onClick:()=>E(h,c,a),children:"Remove"})})]},a)),e.jsx(q,{variant:"outlined",onClick:()=>w(h,c,""),sx:{mt:1},children:g})]})},_e=de;class he extends V{constructor(){super();v(this,"supportedFormats",["image/png","image/svg+xml","image/jpeg","image/webp","image/gif"]);v(this,"validateImage",t=>t?t instanceof File?this.supportedFormats.includes(t.type):typeof t=="string"?[".jpg",".jpeg",".png",".gif",".webp",".svg"].some(g=>t.toLowerCase().endsWith(g)):!1:!0);v(this,"form",{page_name:null,form_header_title:null,form_direction:null,form_person_img:null,form_person_qoute:null,form_person_name:null,form_person_position:null,input_first_name_label:null,input_first_name_placeholder:null,input_last_name_label:null,input_last_name_placeholder:null,input_email_label:null,input_email_placeholder:null,input_phone_label:null,input_phone_placeholder:null,input_company_name_label:null,input_company_name_placeholder:null,input_company_size_label:null,input_company_size_placeholder:null,form_btn_title:null,form_footer:null,is_active:null});v(this,"schema",X().shape({page_name:n().required().max(255),form_header_title:n().required().max(500),form_direction:n().required().max(100),form_person_img:Z().nullable().test("is-image","Person image must be valid",this.validateImage),form_person_qoute:n().required().max(255),form_person_name:n().required().max(255),form_person_position:n().required().max(255),input_first_name_label:n().required().max(255),input_first_name_placeholder:n().required().max(255),input_last_name_label:n().required().max(255),input_last_name_placeholder:n().required().max(255),input_email_label:n().required().max(255),input_email_placeholder:n().required().max(255),input_phone_label:n().required().max(255),input_phone_placeholder:n().required().max(255),input_company_name_label:n().required().max(255),input_company_name_placeholder:n().required().max(255),input_company_size_label:n().required().max(255),input_company_size_placeholder:n().required().max(255),form_btn_title:n().required().max(255),form_footer:n().required().max(255),is_active:ee().nullable()}))}}function Se(){const{showToast:l}=S.useContext(Q),[s,{data:t,isLoading:_,isSuccess:g,error:p,isError:h}]=Y(),[c,{data:w,isLoading:E,isSuccess:x,error:a,isError:j}]=J(),{data:r,isLoading:k,refetch:z}=K(),{controller:A,displayError:R}=new he,{register:o,handleSubmit:U,ServerErrorAlert:$,reset:W,setValue:N,watch:xe,control:B,formState:{errors:i}}=A(),D=async F=>{const P=["form_person_img"];if(console.log("values: ",F),k)l("Please wait for the data to load");else if(r){let C=le(P,F);console.log("after-filter: ",C),s({id:r==null?void 0:r.id,body:M(C)})}else c(M(F))};return I.useEffect(()=>{W({page_name:"Main"})},[]),I.useEffect(()=>{i&&console.log("yup-errors: ",i)},[i]),I.useEffect(()=>{a&&console.log("server-errors: ",a)},[a]),I.useEffect(()=>{p&&(console.log("error: ",p),R(p),$(p))},[p]),I.useEffect(()=>{r&&(W(r),console.log("last-form: ",r))},[r]),I.useEffect(()=>{console.log("data: ",t),(t==null?void 0:t.success)===!0?(console.log("data: ",t),l("Successfully updated","success"),z()):(console.log("data: ",t),l(t==null?void 0:t.message,"error"))},[t]),e.jsxs(oe,{children:[e.jsx(T,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsxs(T,{direction:"column",alignItems:"start",justifyContent:"space-between",children:[e.jsx(f,{variant:"h4",children:"Form"}),e.jsx(f,{variant:"caption",color:"textSecondary",mt:2,children:"Fill this form with it's relative page to be connected to."})]})}),e.jsx(re,{errors:[p,a]}),e.jsx("form",{id:"form-form",method:"POST",onSubmit:U(D),style:{width:"100%"},children:e.jsxs(T,{spacing:5,children:[e.jsxs(y,{sx:{p:3},children:[e.jsxs(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(f,{variant:"h6",sx:{mb:3},children:"Form Section"}),e.jsx(te,{name:"is_active",control:B,render:({field:{onChange:F,value:P}})=>e.jsx(ie,{control:e.jsx(ne,{checked:P===void 0?!0:!!P,onChange:C=>{F(C.target.checked),N("is_active",!!C.target.checked)}}),label:"Active"})})]}),e.jsxs(u,{container:!0,spacing:2,children:[e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(d,{disabled:!0,value:"Main",fullWidth:!0,InputLabelProps:{shrink:!0},label:"Page Name",...m({inputName:"page_name",yupError:i})})}),e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,InputLabelProps:{shrink:!0},...o("form_header_title"),label:"Header Title",...m({inputName:"form_header_title",yupError:i})})}),e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,InputLabelProps:{shrink:!0},...o("form_person_qoute"),label:"Person Qoute",...m({inputName:"form_person_qoute",yupError:i})})}),e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,InputLabelProps:{shrink:!0},...o("form_person_name"),label:"Person Name",...m({inputName:"form_person_name",yupError:i})})}),e.jsx(u,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,InputLabelProps:{shrink:!0},...o("form_person_position"),label:"Person Position",...m({inputName:"form_person_position",yupError:i})})}),e.jsx(u,{item:!0,xs:12,md:6,children:e.jsxs(d,{fullWidth:!0,select:!0,label:"Type",...o("form_direction"),SelectProps:{native:!0},...m({inputName:"form_direction",yupError:i}),children:[e.jsx("option",{selected:!0,disabled:!0,children:"Select Form Direction"}),e.jsx("option",{value:"rtl",children:"Right-To-Left"}),e.jsx("option",{value:"ltr",children:"Left-To-Right"})]})}),e.jsx(u,{item:!0,xs:12,sx:{mb:3},children:e.jsx(pe,{label:"Change Person Image",name:"form_person_img",title:"Person Image",setValue:N,showUrl:r==null?void 0:r.form_person_img,error:{...m({inputName:"form_person_img",yupError:i})}})})]})]}),e.jsxs(y,{sx:{p:3},children:[e.jsx(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsx(f,{variant:"h6",children:"First Name"})}),e.jsx(L,{title:"",register:o,yupErrors:i,titleField:"input_first_name_label",subtitleField:"input_first_name_placeholder",titleLabel:"First Name Label",subtitleLabel:"First Name Input Placeholder"})]}),e.jsxs(y,{sx:{p:3},children:[e.jsx(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsx(f,{variant:"h6",children:"Last Name"})}),e.jsx(L,{title:"",register:o,yupErrors:i,titleField:"input_last_name_label",subtitleField:"input_last_name_placeholder",titleLabel:"Last Name Label",subtitleLabel:"Last Name Input Placeholder"})]}),e.jsxs(y,{sx:{p:3},children:[e.jsx(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsx(f,{variant:"h6",children:"Email"})}),e.jsx(L,{title:"",register:o,yupErrors:i,titleField:"input_email_label",subtitleField:"input_email_placeholder",titleLabel:"Email Name Label",subtitleLabel:"Email Name Input Placeholder"})]}),e.jsxs(y,{sx:{p:3},children:[e.jsx(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsx(f,{variant:"h6",children:"Phone"})}),e.jsx(L,{title:"",register:o,yupErrors:i,titleField:"input_phone_label",subtitleField:"input_phone_placeholder",titleLabel:"Phone Label",subtitleLabel:"Phone Input Placeholder"})]}),e.jsxs(y,{sx:{p:3},children:[e.jsx(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsx(f,{variant:"h6",children:"Company"})}),e.jsx(L,{title:"",register:o,yupErrors:i,titleField:"input_company_name_label",subtitleField:"input_company_name_placeholder",titleLabel:"Company Name Label",subtitleLabel:"Company Name Placeholder"}),e.jsx(L,{title:"",register:o,yupErrors:i,titleField:"input_company_size_label",subtitleField:"input_company_size_placeholder",titleLabel:"Company Size Label",subtitleLabel:"Company Size Placeholder"})]}),e.jsxs(y,{sx:{p:3},children:[e.jsx(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:e.jsx(f,{variant:"h6",children:"Most Interests"})}),e.jsx(d,{fullWidth:!0,InputLabelProps:{shrink:!0},...o("option_most_interested_label"),label:"Most Interseted Label",...m({inputName:"option_most_interested_label",yupError:i})}),e.jsx(_e,{inputLabel:"Type an option",addButtonText:"Add new List Option",defaultValue:(r==null?void 0:r.option_most_interested_options)??null,inputName:"option_most_interested_options",setValue:N,yupErrors:i})]}),e.jsxs(y,{sx:{p:3,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"start",rowGap:"1rem"},children:[e.jsx(b,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:e.jsx(f,{variant:"h6",children:"Button & Footer"})}),e.jsx(d,{fullWidth:!0,InputLabelProps:{shrink:!0},...o("form_btn_title"),label:"Button Title",...m({inputName:"form_btn_title",yupError:i})}),e.jsx(d,{fullWidth:!0,InputLabelProps:{shrink:!0},...o("form_footer"),label:"Form Footer",...m({inputName:"form_footer",yupError:i})})]}),e.jsx(q,{form:"form-form",id:"form-form-btn",disabled:_||k,variant:"contained",type:"submit",children:"Update Form"})]})})]})}export{Se as default};
