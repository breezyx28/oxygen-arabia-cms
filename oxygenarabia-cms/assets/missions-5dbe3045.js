var oe=Object.defineProperty;var re=(t,s,n)=>s in t?oe(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var I=(t,s,n)=>(re(t,typeof s!="symbol"?s+"":s,n),n);import{j as e,U as le,b as O,V as r,r as u,X as ae,B as v,I as E,Y as q,S as D,s as $,J as ce,Z as de,$ as ue,a0 as V,a1 as pe,a2 as he,a3 as U,a4 as xe,W as me}from"./index-203bd9a2.js";import{T as W,a as k,b as ge,c as fe,d as je,e as be,f as ye,g as Se}from"./TableSortLabel-4b7151f4.js";import{Y as H,c as Y,a as L,I as F}from"./index.esm-db640a3f.js";import{a as Q,b as G,c as J,D as X,I as we}from"./IframeModal-6d30ce25.js";import{T as A}from"./TextField-64355d14.js";import"./label-ddacf375.js";import{C as Ce}from"./Container-46542334.js";import{C as Me}from"./Card-6365d421.js";import"./Select-6ba60d6f.js";import"./Popper-557a1982.js";import"./isMuiElement-68bba295.js";function Z({query:t}){return e.jsx(W,{children:e.jsx(k,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(le,{sx:{textAlign:"center"},children:[e.jsx(O,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(O,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}Z.propTypes={query:r.string};function K({emptyRows:t,height:s}){return t?e.jsx(W,{sx:{...s&&{height:s*t}},children:e.jsx(k,{colSpan:9})}):null}K.propTypes={emptyRows:r.number,height:r.number};const ve={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function ke(t,s,n){return t?Math.max(0,(1+t)*s-n):0}function B(t,s,n){return t[n]===null?1:s[n]===null||s[n]<t[n]?-1:s[n]>t[n]?1:0}function Te(t,s){return t==="desc"?(n,o)=>B(n,o,s):(n,o)=>-B(n,o,s)}function Pe({inputData:t,comparator:s,filterName:n}){const o=t.map((l,c)=>[l,c]);return o.sort((l,c)=>{const m=s(l[0],c[0]);return m!==0?m:l[1]-c[1]}),t=o.map(l=>l[0]),n&&(t=t.filter(l=>l.name.toLowerCase().indexOf(n.toLowerCase())!==-1)),t}class Ie extends H{constructor(){super();I(this,"form",{title:null,description:null});I(this,"schema",Y().shape({title:L().required("Title is required"),description:L().required("Description is required")}))}}const Oe=$(X)(({theme:t})=>({"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}));function Ee(){const[t,s]=u.useState(!1),[n,{data:o,isLoading:l,isSuccess:c,error:m,isError:d}]=ae(),{controller:i,displayError:a}=new Ie,{register:y,handleSubmit:g,reset:T,formState:{errors:x}}=i(),S=async f=>{console.log("form-values: ",f),n(f)},P=()=>{s(!0)},w=()=>{s(!1)};return e.jsxs(u.Fragment,{children:[e.jsx(v,{variant:"contained",color:"inherit",startIcon:e.jsx(E,{icon:"eva:plus-fill"}),onClick:P,children:"Create Mission"}),e.jsxs(Oe,{onClose:w,"aria-labelledby":"customized-dialog-title",open:t,fullWidth:!0,children:[e.jsx(Q,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Create Mission Section"}),e.jsx(q,{"aria-label":"close",onClick:w,sx:{position:"absolute",right:8,top:8,color:f=>f.palette.grey[500]},children:e.jsx(De,{})}),e.jsx(G,{dividers:!0,sx:{width:"100%"},children:e.jsxs("form",{method:"POST",onSubmit:g(S),style:{width:"100%"},children:[e.jsxs(D,{spacing:3,children:[e.jsx(A,{fullWidth:!0,...y("title"),label:"Title",...F({inputName:"title",yupError:x})}),e.jsx(A,{fullWidth:!0,...y("description"),label:"Description",...F({inputName:"description",yupError:x})})]}),e.jsx(v,{type:"submit",id:"mission-form",style:{display:"none"},autoFocus:!0,children:"Submit"})]})}),e.jsx(J,{children:e.jsx(v,{autoFocus:!0,onClick:()=>{document.getElementById("mission-form").click()},children:"Save changes"})})]})]})}const De=()=>e.jsx("svg",{width:24,height:24,fill:"none",stroke:"#697686",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"m5 5 14 14M5 19 19 5"})});r.number,r.string,r.func;function _({order:t,orderBy:s,rowCount:n,headLabel:o,numSelected:l,onRequestSort:c,onSelectAllClick:m}){const d=i=>a=>{c(a,i)};return e.jsx(ge,{children:e.jsx(W,{children:o.map(i=>e.jsx(k,{align:i.align||"left",sortDirection:s===i.id?t:!1,sx:{width:i.width,minWidth:i.minWidth},children:e.jsxs(fe,{hideSortIcon:!0,active:s===i.id,direction:s===i.id?t:"asc",onClick:d(i.id),children:[i.label,s===i.id?e.jsx(ce,{sx:{...ve},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},i.id))})})}_.propTypes={order:r.oneOf(["asc","desc"]),orderBy:r.string,rowCount:r.number,headLabel:r.array,numSelected:r.number,onRequestSort:r.func,onSelectAllClick:r.func};class Le extends H{constructor(){super();I(this,"form",{title:null,description:null});I(this,"schema",Y().shape({title:L().nullable(),description:L().required()}))}}const Fe=$(X)(({theme:t})=>({"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}));function Ae({id:t}){const[s,n]=u.useState(!1),[o,{data:l,isLoading:c,isSuccess:m,error:d,isError:i}]=de(),{data:a,isLoading:y}=ue({id:t}),{refetch:g}=V(),{controller:T,displayError:x}=new Le,{register:S,handleSubmit:P,reset:w,formState:{errors:f}}=T(),R=async M=>{console.log("form-values: ",M),o(M)},N=()=>{n(!0)},C=()=>{n(!1)};return u.useEffect(()=>{m&&(console.log("data"),g(),C())},[l]),u.useEffect(()=>{a&&(console.log("missions: ",a),w(a))},[a]),e.jsxs(u.Fragment,{children:[e.jsxs("span",{style:{width:"100%"},onClick:N,children:[e.jsx(E,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(Fe,{onClose:C,"aria-labelledby":"customized-dialog-title",open:s,fullWidth:!0,children:[e.jsx(Q,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Update Mission Section"}),e.jsx(q,{"aria-label":"close",onClick:C,sx:{position:"absolute",right:8,top:8,color:M=>M.palette.grey[500]},children:e.jsx(We,{})}),e.jsx(G,{dividers:!0,sx:{width:"100%"},children:e.jsxs("form",{method:"POST",onSubmit:P(R),style:{width:"100%"},children:[e.jsxs(D,{spacing:3,children:[e.jsx(A,{fullWidth:!0,...S("title"),label:"Title",...F({inputName:"title",yupError:f})}),e.jsx(A,{fullWidth:!0,...S("description"),label:"Description",...F({inputName:"description",yupError:f})})]}),e.jsx(v,{type:"submit",id:"mission-form",style:{display:"none"},autoFocus:!0,children:"Submit"})]})}),e.jsx(J,{children:e.jsx(v,{autoFocus:!0,onClick:()=>{document.getElementById("mission-form").click()},children:"Save changes"})})]})]})}const We=()=>e.jsx("svg",{width:24,height:24,fill:"none",stroke:"#697686",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"m5 5 14 14M5 19 19 5"})});function ee({selected:t,id:s,title:n,description:o,handleClick:l}){const[c,{data:m,isLoading:d}]=pe(),[i,a]=u.useState(null),y=x=>{a(x.currentTarget)},g=()=>{a(null)},T=()=>{a(null),c({id:s})};return e.jsxs(e.Fragment,{children:[e.jsxs(W,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,children:[e.jsx(k,{component:"th",scope:"row",padding:"normal",children:e.jsx(D,{direction:"row",alignItems:"center",spacing:2,children:e.jsx(O,{variant:"subtitle2",noWrap:!0,children:n})})}),e.jsx(k,{children:o}),e.jsx(k,{align:"right",children:e.jsx(q,{onClick:y,children:e.jsx(E,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(he,{open:!!i,anchorEl:i,onClose:g,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsx(U,{children:e.jsx(Ae,{id:s})}),e.jsxs(U,{onClick:T,sx:{color:"error.main"},children:[e.jsx(E,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]})]})}ee.propTypes={id:r.any,title:r.any,description:r.any,handleClick:r.func,selected:r.any};function Re(){const{data:t,isLoading:s,isFetching:n}=V(),[o,l]=u.useState(0),[c,m]=u.useState("asc"),[d,i]=u.useState([]),[a,y]=u.useState("title"),[g,T]=u.useState(""),[x,S]=u.useState(5),P=(p,h)=>{h!==""&&(m(a===h&&c==="asc"?"desc":"asc"),y(h))},w=p=>{if(p.target.checked){const h=(t==null?void 0:t.map(j=>j.title))||[];i(h);return}i([])},f=(p,h)=>{const j=d.indexOf(h);let b=[];j===-1?b=b.concat(d,h):j===0?b=b.concat(d.slice(1)):j===d.length-1?b=b.concat(d.slice(0,-1)):j>0&&(b=b.concat(d.slice(0,j),d.slice(j+1))),i(b)},R=(p,h)=>{l(h)},N=p=>{l(0),S(parseInt(p.target.value,10))},C=Pe({inputData:t||[],comparator:Te(c,a),filterName:g}),M=!C.length&&!!g,[te,z]=u.useState(!1),se="https://oxygenarabia.com/#our-mession",ne=()=>{z(!0)},ie=()=>{z(!1)};return e.jsxs(Ce,{children:[e.jsxs(D,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsxs(D,{direction:"column",alignItems:"start",justifyContent:"space-between",children:[e.jsx(O,{variant:"h4",children:"Missions"}),e.jsx(O,{variant:"caption",color:"textSecondary",mt:2,children:"Mission section in the home page were you can display your goals and explain your missions to incoming visitors"})]}),e.jsx(v,{variant:"contained",onClick:ne,color:"error",startIcon:e.jsx(E,{icon:"fluent:live-24-filled"}),children:"Live"}),e.jsx(Ee,{}),e.jsx(we,{open:te,onClose:ie,src:se,title:"Messions Iframe"})]}),e.jsxs(Me,{children:[e.jsx(xe,{children:e.jsx(je,{sx:{overflow:"unset"},children:e.jsxs(be,{sx:{minWidth:800},children:[e.jsx(_,{order:c,orderBy:a,rowCount:(t==null?void 0:t.length)||0,numSelected:d.length,onRequestSort:P,onSelectAllClick:w,headLabel:[{id:"title",label:"Title"},{id:"description",label:"Description"},{id:""}]}),e.jsxs(ye,{children:[C.slice(o*x,o*x+x).map(p=>e.jsx(ee,{id:p.id,title:p.title||"",description:p.description||"",selected:d.indexOf(p.title)!==-1,handleClick:h=>f(h,p.title)},p.id)),e.jsx(K,{height:77,emptyRows:ke(o,x,(t==null?void 0:t.length)||0)}),M&&e.jsx(Z,{query:g})]})]})})}),e.jsx(Se,{page:o,component:"div",count:(t==null?void 0:t.length)||0,rowsPerPage:x,onPageChange:R,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:N})]})]})}function Xe(){return e.jsxs(e.Fragment,{children:[e.jsx(me,{children:e.jsx("title",{children:" Mission | Oxygen Arabia "})}),e.jsx(Re,{})]})}export{Xe as default};
