import{j as e,U as K,b as I,V as a,r as u,ah as U,ai as X,aj as Z,I as M,Y as z,S as L,B as D,s as $,ak as ee,a2 as te,a3 as R,J as ne,a4 as se,W as ie}from"./index-203bd9a2.js";import{T as A,a as S,b as re,c as oe,d as ae,e as le,f as ce,g as de}from"./TableSortLabel-4b7151f4.js";import"./label-ddacf375.js";import{I as O}from"./index.esm-db640a3f.js";import{S as ue,a as pe,b as he,c as ge,D as me,I as xe,d as fe}from"./IframeModal-6d30ce25.js";import{T as E}from"./TextField-64355d14.js";import{C as je}from"./Container-46542334.js";import{C as Se}from"./Card-6365d421.js";import"./Select-6ba60d6f.js";import"./Popper-557a1982.js";import"./isMuiElement-68bba295.js";function q({query:t}){return e.jsx(A,{children:e.jsx(S,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(K,{sx:{textAlign:"center"},children:[e.jsx(I,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(I,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}q.propTypes={query:a.string};const be=$(me)(({theme:t})=>({"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}));function ve({id:t}){const[n,s]=u.useState(!1),{refetch:o}=U(),{data:i,isLoading:d}=X({id:t}),[x,{data:l,isLoading:r,isSuccess:f,error:b,isError:v}]=Z(),{controller:y,displayError:h}=new ue,{register:j,handleSubmit:T,reset:k,formState:{errors:C}}=y();u.useEffect(()=>{b&&(console.log("error: ",b),h(b))},[b]);const F=async P=>{x(P)},_=()=>{s(!0)},w=()=>{s(!1)};return u.useEffect(()=>{f&&(console.log("data"),o(),w())},[l]),u.useEffect(()=>{i&&(console.log("services: ",i),k(i))},[i]),e.jsxs(u.Fragment,{children:[e.jsxs("span",{style:{width:"100%"},onClick:_,children:[e.jsx(M,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(be,{onClose:w,"aria-labelledby":"customized-dialog-title",open:n,fullWidth:!0,children:[e.jsx(pe,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Update Service Section"}),e.jsx(z,{"aria-label":"close",onClick:w,sx:{position:"absolute",right:8,top:8,color:P=>P.palette.grey[500]},children:e.jsx(ye,{})}),e.jsx(he,{dividers:!0,children:e.jsxs("form",{method:"POST",onSubmit:T(F),children:[e.jsxs(L,{spacing:3,children:[e.jsx(E,{fullWidth:!0,...j("name"),name:"name",label:"Service name",...O({inputName:"name",yupError:C})}),e.jsx(E,{fullWidth:!0,...j("description"),name:"description",label:"Service description",...O({inputName:"description",yupError:C})}),e.jsx(E,{fullWidth:!0,...j("page_title"),name:"page_title",label:"Service Page  Title",...O({inputName:"page_title",yupError:C})}),e.jsx(E,{fullWidth:!0,...j("page_subtitle"),name:"page_subtitle",label:"Service Page Subtitle",...O({inputName:"page_subtitle",yupError:C})})]}),e.jsx(D,{type:"submit",id:"service-form",style:{display:"none"},autoFocus:!0,children:"Submit"})]})}),e.jsx(ge,{children:e.jsx(D,{autoFocus:!0,onClick:()=>{document.getElementById("service-form").click()},children:"Update changes"})})]})]})}const ye=()=>e.jsx("svg",{width:24,height:24,fill:"none",stroke:"#697686",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"m5 5 14 14M5 19 19 5"})});function H({selected:t,id:n,name:s,description:o,page_title:i,page_subtitle:d,handleClick:x}){const[l,{data:r,isLoading:f,error:b}]=ee(),[v,y]=u.useState(null),h=k=>{y(k.currentTarget)},j=()=>{y(null)},T=()=>{y(null),l({id:n})};return e.jsxs(e.Fragment,{children:[e.jsxs(A,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,children:[e.jsx(S,{component:"th",scope:"row",padding:"normal",children:e.jsx(L,{direction:"row",alignItems:"center",spacing:2,children:e.jsx(I,{variant:"subtitle2",noWrap:!0,children:s})})}),e.jsx(S,{children:o}),e.jsx(S,{children:i}),e.jsx(S,{children:d}),e.jsx(S,{align:"right",children:e.jsx(z,{onClick:h,children:e.jsx(M,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(te,{open:!!v,anchorEl:v,onClose:j,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsx(R,{children:e.jsx(ve,{id:n})}),e.jsxs(R,{onClick:T,sx:{color:"error.main"},children:[e.jsx(M,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]})]})}H.propTypes={handleClick:a.func,name:a.any,selected:a.any};const Ce={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function we(t,n,s){return t?Math.max(0,(1+t)*n-s):0}function W(t,n,s){return t[s]===null?1:n[s]===null||n[s]<t[s]?-1:n[s]>t[s]?1:0}function Te(t,n){return t==="desc"?(s,o)=>W(s,o,n):(s,o)=>-W(s,o,n)}function ke({inputData:t,comparator:n,filterName:s}){const o=t.map((i,d)=>[i,d]);return o.sort((i,d)=>{const x=n(i[0],d[0]);return x!==0?x:i[1]-d[1]}),t=o.map(i=>i[0]),s&&(t=t.filter(i=>i.name.toLowerCase().indexOf(s.toLowerCase())!==-1)),t}function B({order:t,orderBy:n,rowCount:s,headLabel:o,numSelected:i,onRequestSort:d,onSelectAllClick:x}){const l=r=>f=>{d(f,r)};return e.jsx(re,{children:e.jsx(A,{children:o.map(r=>e.jsx(S,{align:r.align||"left",sortDirection:n===r.id?t:!1,sx:{width:r.width,minWidth:r.minWidth},children:e.jsxs(oe,{hideSortIcon:!0,active:n===r.id,direction:n===r.id?t:"asc",onClick:l(r.id),children:[r.label,n===r.id?e.jsx(ne,{sx:{...Ce},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},r.id))})})}B.propTypes={order:a.oneOf(["asc","desc"]),orderBy:a.string,rowCount:a.number,headLabel:a.array,numSelected:a.number,onRequestSort:a.func,onSelectAllClick:a.func};function Q({emptyRows:t,height:n}){return t?e.jsx(A,{sx:{...n&&{height:n*t}},children:e.jsx(S,{colSpan:9})}):null}Q.propTypes={emptyRows:a.number,height:a.number};a.number,a.string,a.func;function Pe(){const{data:t,isLoading:n,isFetching:s}=U(),[o,i]=u.useState(0),[d,x]=u.useState("asc"),[l,r]=u.useState([]),[f,b]=u.useState("name"),[v,y]=u.useState(""),[h,j]=u.useState(5),T=(c,p)=>{p!==""&&(x(f===p&&d==="asc"?"desc":"asc"),b(p))},k=c=>{if(c.target.checked){const p=t==null?void 0:t.map(g=>g.name);r(p);return}r([])},C=(c,p)=>{const g=l.indexOf(p);let m=[];g===-1?m=m.concat(l,p):g===0?m=m.concat(l.slice(1)):g===l.length-1?m=m.concat(l.slice(0,-1)):g>0&&(m=m.concat(l.slice(0,g),l.slice(g+1))),r(m)},F=(c,p)=>{i(p)},_=c=>{i(0),j(parseInt(c.target.value,10))},w=ke({inputData:(t==null?void 0:t.data)??[],comparator:Te(d,f),filterName:v}),P=!w.length&&!!v,[V,N]=u.useState(!1),G="https://oxygenarabia.com#services",J=()=>{N(!0)},Y=()=>{N(!1)};return e.jsxs(je,{children:[e.jsxs(L,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsxs(L,{direction:"column",alignItems:"start",justifyContent:"space-between",children:[e.jsx(I,{variant:"h4",children:"Services"}),e.jsx(I,{variant:"caption",color:"textSecondary",mt:2,children:"Services section, control your existed services and add more."})]}),e.jsx(D,{variant:"contained",onClick:J,color:"error",startIcon:e.jsx(M,{icon:"fluent:live-24-filled"}),children:"Live"}),e.jsx(xe,{open:V,onClose:Y,src:G,title:"Services Iframe"}),e.jsx(fe,{})]}),e.jsxs(Se,{children:[e.jsx(se,{children:e.jsx(ae,{sx:{overflow:"unset"},children:e.jsxs(le,{sx:{minWidth:800},children:[e.jsx(B,{order:d,orderBy:f,rowCount:(t==null?void 0:t.length)??[],numSelected:l.length,onRequestSort:T,onSelectAllClick:k,headLabel:[{id:"name",label:"Name"},{id:"description",label:"Description"},{id:"page_title",label:"Page Title"},{id:"page_subtitle",label:"Page Subtitle"},{id:""}]}),e.jsxs(ce,{children:[w.slice(o*h,o*h+h).map(c=>e.jsx(H,{id:c.id,name:c.name,description:c.description,page_title:c.page_title,page_subtitle:c.page_subtitle,selected:l.indexOf(c.name)!==-1,handleClick:p=>C(p,c.name)},c.id)),e.jsx(Q,{height:77,emptyRows:we(o,h,(t==null?void 0:t.length)??[])}),P&&e.jsx(q,{query:v})]})]})})}),e.jsx(de,{page:o,component:"div",count:(t==null?void 0:t.length)??[],rowsPerPage:h,onPageChange:F,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:_})]})]})}function We(){return e.jsxs(e.Fragment,{children:[e.jsx(ie,{children:e.jsx("title",{children:" Service | Oxygen Arabia "})}),e.jsx(Pe,{})]})}export{We as default};
