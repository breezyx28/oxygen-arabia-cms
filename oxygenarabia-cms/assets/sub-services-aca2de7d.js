var ue=Object.defineProperty;var pe=(t,r,i)=>r in t?ue(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i;var U=(t,r,i)=>(pe(t,typeof r!="symbol"?r+"":r,i),i);import{j as e,U as me,b as T,V as p,J as P,a3 as H,r as c,al as he,am as xe,ah as K,I as A,Y as Q,S as z,B as N,s as X,a8 as Z,an as ge,a2 as fe,af as je,ao as be,ap as Se,a4 as ve,W as ye}from"./index-203bd9a2.js";import{T as G,a as k,b as Ce,c as we,d as Ie,e as Ee,f as ke,g as Te}from"./TableSortLabel-4b7151f4.js";import"./label-ddacf375.js";import{Y as Fe,c as Me,f as _e,a as V,b as Y,I as b}from"./index.esm-db640a3f.js";import{F as De,I as Oe,a as Pe,T as D}from"./TextField-64355d14.js";import{S as Le}from"./Select-6ba60d6f.js";import{F as B}from"./FileUploadInput-2322a252.js";import{a as ee,b as te,c as ie,D as re,I as We}from"./IframeModal-6d30ce25.js";import{G as R}from"./Grid-32ebb4ff.js";import{C as Ne}from"./Container-46542334.js";import{C as Re}from"./Card-6365d421.js";import"./isMuiElement-68bba295.js";import"./Popper-557a1982.js";function se({query:t}){return e.jsx(G,{children:e.jsx(k,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(me,{sx:{textAlign:"center"},children:[e.jsx(T,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(T,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}se.propTypes={query:p.string};class ne extends Fe{constructor(){super();U(this,"supportedFormats",["image/png","image/svg+xml","image/jpeg"]);U(this,"form",{service_id:null,image:null,title:null,subtitle:null,description:null,card_description:null});U(this,"schema",Me().shape({service_id:_e().min(0).required("Service is required"),title:V().required("Title is required"),subtitle:V().required("Subtitle is required"),description:V().required("Description is required"),card_description:V().required("Card description is required"),image:Y().required("Image is required").test("fileFormat","Unsupported file format",i=>i?this.supportedFormats.includes(i.type):!0).test("fileSize","File size must not exceed 1 MB",i=>i?i.size<=1048576:!0),card_image:Y().required("Card Image is required").test("fileFormat","Unsupported file format",i=>i?this.supportedFormats.includes(i.type):!0).test("fileSize","File size must not exceed 1 MB",i=>i?i.size<=1048576:!0)}))}}function oe({label:t,name:r,title:i,items:o,value:a,setValue:m=()=>null,error:u,...h}){const s=l=>{m(l.target.value)};return e.jsx(P,{sx:{minWidth:120},children:e.jsxs(De,{fullWidth:!0,error:u==null?void 0:u.error,children:[e.jsx(Oe,{id:"demo-simple-select-label",children:i}),e.jsx(Le,{...h,labelId:"demo-simple-select-label",id:"demo-simple-select",value:a,label:t,name:r,onChange:s,children:o==null?void 0:o.map((l,w)=>e.jsx(H,{value:l==null?void 0:l.id,children:l==null?void 0:l.name},w))}),u!=null&&u.error?e.jsxs(Pe,{children:[...u==null?void 0:u.helperText]}):""]})})}const qe=X(re)(({theme:t})=>({"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}));function Ae({id:t}){const[r,i]=c.useState(!1),[o,a]=c.useState(""),[m,{data:u,isLoading:h,isSuccess:s,error:l,isError:w}]=he(),{data:n,isLoading:$,refetch:v}=xe({id:t}),{data:I,isLoading:q,isFetching:O,isSuccess:L,error:y,isError:W}=K({}),{controller:F,displayError:M}=new ne,{register:x,handleSubmit:_,reset:E,setValue:C,formState:{errors:f}}=F();c.useEffect(()=>{l&&(console.log("error: ",l),M(l)),f&&console.log("yupErrors: ",f)},[l,f]);const d=async g=>{console.log("values: ",g);let de=Z(g);m({id:t,body:de})},j=()=>{i(!0)},S=()=>{i(!1)};return c.useEffect(()=>{s&&(console.log("data"),v(),S())},[u]),c.useEffect(()=>{var g;n&&(console.log("subServices: ",n),E(n),C("image",""),C("card_image",""),a((g=n==null?void 0:n.service)==null?void 0:g.id))},[n]),e.jsxs(c.Fragment,{children:[e.jsxs("span",{style:{width:"100%"},onClick:j,children:[e.jsx(A,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(qe,{onClose:S,"aria-labelledby":"customized-dialog-title",open:r,fullWidth:!0,children:[e.jsx(ee,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Create Subservice Section"}),e.jsx(Q,{"aria-label":"close",onClick:S,sx:{position:"absolute",right:8,top:8,color:g=>g.palette.grey[500]},children:e.jsx(ze,{})}),e.jsx(te,{dividers:!0,children:e.jsxs("form",{method:"POST",onSubmit:_(d),children:[e.jsxs(z,{spacing:3,children:[e.jsx(R,{item:!0,xs:8,md:8,children:e.jsx(oe,{...x("service_id"),label:"Select service",name:"service_id",title:"Services",items:(I==null?void 0:I.data)??[{id:1,name:"Service"}],value:o,setValue:a,error:{...b({inputName:"service_id",yupError:f})}})}),e.jsx(P,{sx:{flexGrow:1,gap:4},children:e.jsx(R,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:(n==null?void 0:n.image)&&e.jsx(B,{label:"Upload Subservice Image",name:"image",title:"Subservice Image",setValue:C,error:{...b({inputName:"image",yupError:f})},showUrl:n==null?void 0:n.image})})}),e.jsx(D,{fullWidth:!0,...x("title"),name:"title",label:"Title",...b({inputName:"title",yupError:f})}),e.jsx(D,{...x("subtitle"),fullWidth:!0,multiline:!0,maxRows:4,name:"subtitle",label:"Subtitle",...b({inputName:"subtitle",yupError:f})}),e.jsx(D,{...x("description"),fullWidth:!0,multiline:!0,maxRows:4,name:"description",label:"Description",...b({inputName:"description",yupError:f})}),e.jsx(D,{...x("card_description"),fullWidth:!0,multiline:!0,maxRows:4,name:"card_description",label:"Card Description",...b({inputName:"card_description",yupError:f})}),e.jsx(P,{sx:{flexGrow:1,gap:4},children:e.jsx(R,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:(n==null?void 0:n.card_image)&&e.jsx(B,{label:"Card Image",name:"card_image",title:"Card Image",setValue:C,error:{...b({inputName:"card_image",yupError:f})},showUrl:n==null?void 0:n.card_image})})})]}),e.jsx(N,{type:"submit",id:"service-form",style:{display:"none"},autoFocus:!0,children:"Submit"})]})}),e.jsx(ie,{children:e.jsx(N,{autoFocus:!0,onClick:()=>{document.getElementById("service-form").click()},children:"Update"})})]})]})}const ze=()=>e.jsx("svg",{width:24,height:24,fill:"none",stroke:"#697686",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"m5 5 14 14M5 19 19 5"})}),Ue={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2};function ae({selected:t,id:r,title:i,subtitle:o,service:a,image:m,description:u,card_description:h,handleClick:s}){const[l,{data:w,isLoading:n,isError:$}]=ge(),[v,I]=c.useState(null),[q,O]=c.useState(!1),[L,y]=c.useState(""),W=E=>{I(E.currentTarget)},F=()=>{I(null)},M=()=>{l({id:r})},x=E=>{y(E),O(!0)},_=()=>{O(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(G,{hover:!0,tabIndex:-1,role:"checkbox",selected:t,children:[e.jsx(k,{component:"th",scope:"row",padding:"none",children:e.jsxs(z,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx("img",{src:m,alt:i,style:{width:100,height:100,objectFit:"cover"}}),e.jsx(T,{variant:"subtitle2",noWrap:!0,children:i})]})}),e.jsx(k,{children:o}),e.jsx(k,{children:a==null?void 0:a.name}),e.jsx(k,{onClick:()=>x(u),style:{cursor:"pointer"},children:e.jsx(T,{noWrap:!0,sx:{textDecoration:"underline",color:"primary.main"},children:"View Description"})}),e.jsx(k,{onClick:()=>x(h),style:{cursor:"pointer"},children:e.jsx(T,{noWrap:!0,sx:{textDecoration:"underline",color:"primary.main"},children:"View Card Description"})}),e.jsx(k,{align:"right",children:e.jsx(Q,{onClick:W,children:e.jsx(A,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(fe,{open:!!v,anchorEl:v,onClose:F,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsx(H,{children:e.jsx(Ae,{id:r})}),e.jsxs(H,{onClick:M,sx:{color:"error.main"},children:[e.jsx(A,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]}),e.jsx(je,{open:q,onClose:_,children:e.jsxs(P,{sx:Ue,children:[e.jsx(T,{variant:"h6",component:"h2",gutterBottom:!0,children:"Content"}),e.jsx(T,{children:L})]})})]})}ae.propTypes={image:p.any,description:p.any,handleClick:p.func,service:p.any,title:p.any,selected:p.any,card_description:p.any};const Ve={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Be(t,r,i){return t?Math.max(0,(1+t)*r-i):0}function J(t,r,i){return t[i]===null?1:r[i]===null||r[i]<t[i]?-1:r[i]>t[i]?1:0}function Ge(t,r){return t==="desc"?(i,o)=>J(i,o,r):(i,o)=>-J(i,o,r)}function $e({inputData:t,comparator:r,filterName:i}){const o=t.map((a,m)=>[a,m]);return o.sort((a,m)=>{const u=r(a[0],m[0]);return u!==0?u:a[1]-m[1]}),t=o.map(a=>a[0]),i&&(t=t.filter(a=>a.name.toLowerCase().indexOf(i.toLowerCase())!==-1)),t}function le({order:t,orderBy:r,rowCount:i,headLabel:o,numSelected:a,onRequestSort:m,onSelectAllClick:u}){const h=s=>l=>{m(l,s)};return e.jsx(Ce,{children:e.jsx(G,{children:o.map(s=>e.jsx(k,{align:s.align||"left",sortDirection:r===s.id?t:!1,sx:{width:s.width,minWidth:s.minWidth},children:e.jsxs(we,{hideSortIcon:!0,active:r===s.id,direction:r===s.id?t:"asc",onClick:h(s.id),children:[s.label,r===s.id?e.jsx(P,{sx:{...Ve},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},s.id))})})}le.propTypes={order:p.oneOf(["asc","desc"]),orderBy:p.string,rowCount:p.number,headLabel:p.array,numSelected:p.number,onRequestSort:p.func,onSelectAllClick:p.func};function ce({emptyRows:t,height:r}){return t?e.jsx(G,{sx:{...r&&{height:r*t}},children:e.jsx(k,{colSpan:9})}):null}ce.propTypes={emptyRows:p.number,height:p.number};p.number,p.string,p.func;const He=X(re)(({theme:t})=>({"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}));function Qe(){const[t,r]=c.useState(!1),[i,o]=c.useState("");c.useState(null);const[a,{data:m,isLoading:u,isSuccess:h,error:s,isError:l}]=be(),{data:w,isLoading:n,isFetching:$,isSuccess:v,error:I,isError:q}=K({}),{controller:O,displayError:L}=new ne,{register:y,handleSubmit:W,reset:F,setValue:M,formState:{errors:x}}=O();c.useEffect(()=>{s&&(console.log("error: ",s),L(s))},[s]);const _=async f=>{let d=Z(f);a(d)},E=()=>{r(!0)},C=()=>{r(!1)};return c.useEffect(()=>{h&&(F(),C())},[m]),e.jsxs(c.Fragment,{children:[e.jsx(N,{variant:"contained",color:"inherit",startIcon:e.jsx(A,{icon:"eva:plus-fill"}),onClick:E,children:"Create Subservice"}),e.jsxs(He,{onClose:C,"aria-labelledby":"customized-dialog-title",open:t,fullWidth:!0,children:[e.jsx(ee,{sx:{m:0,p:2},id:"customized-dialog-title",children:"Create Subservice Section"}),e.jsx(Q,{"aria-label":"close",onClick:C,sx:{position:"absolute",right:8,top:8,color:f=>f.palette.grey[500]},children:e.jsx(Ye,{})}),e.jsx(te,{dividers:!0,children:e.jsxs("form",{method:"POST",onSubmit:W(_),children:[e.jsxs(z,{spacing:3,children:[e.jsx(R,{item:!0,xs:8,md:8,children:e.jsx(oe,{...y("service_id"),label:"Select service",name:"service_id",title:"Services",items:(w==null?void 0:w.data)??[{id:1,name:"Service"}],value:i,setValue:o,error:{...b({inputName:"service_id",yupError:x})}})}),e.jsx(P,{sx:{flexGrow:1,gap:4},children:e.jsx(R,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:e.jsx(B,{label:"Upload Subservice Image",name:"image",title:"Subservice Image",setValue:M,error:{...b({inputName:"image",yupError:x})}})})}),e.jsx(D,{fullWidth:!0,...y("title"),name:"title",label:"Title",...b({inputName:"title",yupError:x})}),e.jsx(D,{...y("subtitle"),fullWidth:!0,multiline:!0,maxRows:4,name:"subtitle",label:"Subtitle",...b({inputName:"subtitle",yupError:x})}),e.jsx(D,{...y("description"),fullWidth:!0,multiline:!0,maxRows:4,name:"description",label:"Description",...b({inputName:"description",yupError:x})}),e.jsx(D,{...y("card_description"),fullWidth:!0,multiline:!0,maxRows:4,name:"card_description",label:"Card Description",...b({inputName:"card_description",yupError:x})}),e.jsx(P,{sx:{flexGrow:1,gap:4},children:e.jsx(R,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:e.jsx(B,{label:"Upload Card Image",name:"card_image",title:"Card Image",setValue:M,error:{...b({inputName:"card_image",yupError:x})}})})})]}),e.jsx(N,{type:"submit",id:"service-form",style:{display:"none"},autoFocus:!0,children:"Submit"})]})}),e.jsx(ie,{children:e.jsx(N,{autoFocus:!0,onClick:()=>{document.getElementById("service-form").click()},children:"Save changes"})})]})]})}const Ye=()=>e.jsx("svg",{width:24,height:24,fill:"none",stroke:"#697686",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"m5 5 14 14M5 19 19 5"})});function Je(){const{data:t,isLoading:r,isFetching:i}=Se(),[o,a]=c.useState(0),[m,u]=c.useState("asc"),[h,s]=c.useState([]),[l,w]=c.useState("name"),[n,$]=c.useState(""),[v,I]=c.useState(5),q=(d,j)=>{j!==""&&(u(l===j&&m==="asc"?"desc":"asc"),w(j))},O=d=>{if(d.target.checked){const j=t==null?void 0:t.map(S=>S.name);s(j);return}s([])},L=(d,j)=>{const S=h.indexOf(j);let g=[];S===-1?g=g.concat(h,j):S===0?g=g.concat(h.slice(1)):S===h.length-1?g=g.concat(h.slice(0,-1)):S>0&&(g=g.concat(h.slice(0,S),h.slice(S+1))),s(g)},y=(d,j)=>{a(j)},W=d=>{a(0),I(parseInt(d.target.value,10))},F=$e({inputData:(t==null?void 0:t.data)??[],comparator:Ge(m,l),filterName:n}),M=!F.length&&!!n,[x,_]=c.useState(!1),E="https://oxygenarabia.com/#services",C=()=>{_(!0)},f=()=>{_(!1)};return e.jsxs(Ne,{children:[e.jsxs(z,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsxs(z,{direction:"column",alignItems:"start",justifyContent:"space-between",children:[e.jsx(T,{variant:"h4",children:"Subservices"}),e.jsx(T,{variant:"caption",color:"textSecondary",mt:2,children:"Subservices section, connect your subservices with related services for your customers."})]}),e.jsx(N,{variant:"contained",onClick:C,color:"error",startIcon:e.jsx(A,{icon:"fluent:live-24-filled"}),children:"Live"}),e.jsx(We,{open:x,onClose:f,src:E,title:"Sub-Services Iframe"}),e.jsx(Qe,{})]}),e.jsxs(Re,{children:[e.jsx(ve,{children:e.jsx(Ie,{sx:{overflow:"unset"},children:e.jsxs(Ee,{sx:{minWidth:800},children:[e.jsx(le,{order:m,orderBy:l,rowCount:(t==null?void 0:t.length)??[],numSelected:h.length,onRequestSort:q,onSelectAllClick:O,headLabel:[{id:"title",label:"Title"},{id:"subtitle",label:"Subtitle"},{id:"service",label:"Related Service"},{id:"description",label:"Description"},{id:"card_description",label:"Card Description"},{id:""}]}),e.jsxs(ke,{children:[F.slice(o*v,o*v+v).map(d=>e.jsx(ae,{id:d.id,title:d.title,subtitle:d.subtitle,image:d.image,service:d.service,description:d.description,card_description:d.card_description,selected:h.indexOf(d.name)!==-1,handleClick:j=>L(j,d.name)},d.id)),e.jsx(ce,{height:77,emptyRows:Be(o,v,t==null?void 0:t.length)}),M&&e.jsx(se,{query:n})]})]})})}),e.jsx(Te,{page:o,component:"div",count:(t==null?void 0:t.length)??[],rowsPerPage:v,onPageChange:y,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:W})]})]})}function ut(){return e.jsxs(e.Fragment,{children:[e.jsx(ye,{children:e.jsx("title",{children:" Sub Service | Oxygen Arabia "})}),e.jsx(Je,{})]})}export{ut as default};
